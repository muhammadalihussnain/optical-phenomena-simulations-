<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optical Qubit: From Classical Light to Quantum Photons</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f0f23, #1a1a3e);
            font-family: 'Arial', sans-serif;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        h1 {
            color: #ffaa00;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #ffaa00;
        }
        
        .subtitle {
            color: #888;
            text-align: center;
            margin-bottom: 30px;
        }
        
        canvas {
            border: 2px solid #ffaa00;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.3);
            background: #000011;
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            background: linear-gradient(45deg, #ffaa00, #ffcc44);
            border: none;
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 170, 0, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 170, 0, 0.4);
        }
        
        .info-panel {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }
        
        .info-box {
            background: rgba(0, 0, 0, 0.6);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #444;
            text-align: center;
        }
        
        .info-box h3 {
            color: #ffaa00;
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        
        .value {
            color: #00ffff;
            font-weight: bold;
            font-size: 18px;
        }
        
        .phase-indicator {
            margin-top: 10px;
            font-size: 14px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <h1>Optical Qubit: Classical to Quantum Transition</h1>
    <p class="subtitle">Watch how bright laser light becomes individual photons at low intensity</p>
    
    <canvas id="opticalCanvas" width="900" height="600"></canvas>
    
    <div class="controls">
        <button onclick="toggleAnimation()">Pause/Resume</button>
        <button onclick="resetAnimation()">Reset</button>
        <button onclick="dimLight()">Dim Light</button>
        <button onclick="brightenLight()">Brighten Light</button>
        <button onclick="toggleDetector()">Toggle Detector</button>
    </div>
    
    <div class="info-panel">
        <div class="info-box">
            <h3>Light Intensity</h3>
            <div class="value" id="intensityValue">100%</div>
            <div class="phase-indicator">Classical Regime</div>
        </div>
        <div class="info-box">
            <h3>Photon Rate</h3>
            <div class="value" id="photonRate">Continuous</div>
            <div class="phase-indicator">Detection Mode</div>
        </div>
        <div class="info-box">
            <h3>Detector Clicks</h3>
            <div class="value" id="clickCount">0</div>
            <div class="phase-indicator">Total Count</div>
        </div>
        <div class="info-box">
            <h3>Physics Regime</h3>
            <div class="value" id="regimeValue">Classical</div>
            <div class="phase-indicator">Current State</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('opticalCanvas');
        const ctx = canvas.getContext('2d');
        
        let animationId;
        let time = 0;
        let isAnimating = true;
        let lightIntensity = 1.0;
        let detectorOn = true;
        let photonQueue = [];
        let detectorClicks = [];
        let totalClicks = 0;
        let lastClickTime = 0;
        
        // Animation parameters
        const laserX = 100;
        const laserY = 200;
        const screenX = 400;
        const screenY = 200;
        const detectorX = 700;
        const detectorY = 200;
        const graphX = 450;
        const graphY = 350;
        const graphWidth = 400;
        const graphHeight = 200;
        
        // Physics parameters
        let photonEnergy = 2.0; // eV
        let workFunction = 1.5; // eV
        
        function drawBackground() {
            // Clear canvas with gradient
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, 'rgba(0, 20, 40, 0.9)');
            gradient.addColorStop(1, 'rgba(0, 0, 17, 1)');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function drawLaser() {
            // Laser body
            ctx.fillStyle = '#333';
            ctx.fillRect(laserX - 40, laserY - 20, 80, 40);
            
            // Laser aperture
            ctx.fillStyle = '#666';
            ctx.fillRect(laserX + 35, laserY - 15, 10, 30);
            
            // Laser beam (intensity dependent)
            const beamAlpha = Math.min(lightIntensity, 1.0);
            const beamWidth = 8 + lightIntensity * 12;
            
            // Main beam
            const gradient = ctx.createLinearGradient(laserX + 45, laserY - beamWidth/2, laserX + 45, laserY + beamWidth/2);
            gradient.addColorStop(0, `rgba(255, 0, 0, 0)`);
            gradient.addColorStop(0.5, `rgba(255, 100, 100, ${beamAlpha})`);
            gradient.addColorStop(1, `rgba(255, 0, 0, 0)`);
            
            ctx.fillStyle = gradient;
            ctx.fillRect(laserX + 45, laserY - beamWidth/2, screenX - laserX - 45, beamWidth);
            
            // Beam center line
            ctx.strokeStyle = `rgba(255, 150, 150, ${beamAlpha})`;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(laserX + 45, laserY);
            ctx.lineTo(screenX, laserY);
            ctx.stroke();
            
            // Label
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#ffaa00';
            ctx.fillText('Laser', laserX - 20, laserY - 30);
        }
        
        function drawScreen() {
            // Screen
            ctx.fillStyle = '#444';
            ctx.fillRect(screenX - 5, screenY - 60, 10, 120);
            
            // Screen glow (intensity dependent)
            if (lightIntensity > 0.1) {
                const glowRadius = 20 + lightIntensity * 30;
                const glowAlpha = Math.min(lightIntensity * 0.8, 0.8);
                
                const gradient = ctx.createRadialGradient(screenX, screenY, 0, screenX, screenY, glowRadius);
                gradient.addColorStop(0, `rgba(255, 200, 100, ${glowAlpha})`);
                gradient.addColorStop(0.5, `rgba(255, 150, 50, ${glowAlpha * 0.5})`);
                gradient.addColorStop(1, `rgba(255, 100, 0, 0)`);
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(screenX, screenY, glowRadius, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Label
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#ffaa00';
            ctx.fillText('Screen', screenX - 25, screenY - 80);
        }
        
        function drawPhotons() {
            // Generate photons based on intensity
            if (lightIntensity > 0.01 && Math.random() < lightIntensity * 0.1) {
                photonQueue.push({
                    x: laserX + 45,
                    y: laserY + (Math.random() - 0.5) * 20,
                    speed: 3 + Math.random() * 2,
                    size: 2 + Math.random() * 3,
                    energy: photonEnergy,
                    alpha: 0.3 + Math.random() * 0.7
                });
            }
            
            // Draw and update photons
            for (let i = photonQueue.length - 1; i >= 0; i--) {
                const photon = photonQueue[i];
                
                // Update position
                photon.x += photon.speed;
                
                // Draw photon as energy packet
                const gradient = ctx.createRadialGradient(photon.x, photon.y, 0, photon.x, photon.y, photon.size * 2);
                gradient.addColorStop(0, `rgba(255, 255, 0, ${photon.alpha})`);
                gradient.addColorStop(0.5, `rgba(255, 200, 0, ${photon.alpha * 0.7})`);
                gradient.addColorStop(1, `rgba(255, 150, 0, 0)`);
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(photon.x, photon.y, photon.size * 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw photon core
                ctx.fillStyle = `rgba(255, 255, 255, ${photon.alpha})`;
                ctx.beginPath();
                ctx.arc(photon.x, photon.y, photon.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Check if photon hits detector
                if (detectorOn && photon.x >= detectorX - 20 && photon.x <= detectorX + 20 && 
                    Math.abs(photon.y - detectorY) < 40) {
                    
                    // Photoelectric effect check
                    if (photon.energy >= workFunction) {
                        registerDetectorClick(photon);
                    }
                    
                    photonQueue.splice(i, 1);
                } else if (photon.x > canvas.width) {
                    photonQueue.splice(i, 1);
                }
            }
        }
        
        function drawDetector() {
            // Detector body
            ctx.fillStyle = detectorOn ? '#2a4d3a' : '#4a2a2a';
            ctx.fillRect(detectorX - 25, detectorY - 40, 50, 80);
            
            // Detector window
            ctx.fillStyle = detectorOn ? '#4a7c59' : '#7c4a4a';
            ctx.fillRect(detectorX - 20, detectorY - 30, 40, 60);
            
            // Detector active indicator
            if (detectorOn) {
                ctx.fillStyle = '#00ff00';
                ctx.beginPath();
                ctx.arc(detectorX, detectorY - 50, 5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Recent click flash
            if (time - lastClickTime < 10) {
                const flashAlpha = Math.max(0, 1 - (time - lastClickTime) / 10);
                ctx.fillStyle = `rgba(255, 255, 0, ${flashAlpha})`;
                ctx.fillRect(detectorX - 25, detectorY - 40, 50, 80);
            }
            
            // Label
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#ffaa00';
            ctx.fillText('Photon Detector', detectorX - 50, detectorY - 60);
        }
        
        function registerDetectorClick(photon) {
            totalClicks++;
            lastClickTime = time;
            
            // Add click to graph data
            detectorClicks.push({
                time: time,
                intensity: 1.0,
                energy: photon.energy
            });
            
            // Keep only recent clicks for graph
            if (detectorClicks.length > 200) {
                detectorClicks.shift();
            }
        }
        
        function drawDetectorGraph() {
            // Graph background
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(graphX, graphY, graphWidth, graphHeight);
            
            // Graph border
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.strokeRect(graphX, graphY, graphWidth, graphHeight);
            
            // Graph title
            ctx.font = 'bold 16px Arial';
            ctx.fillStyle = '#ffaa00';
            ctx.fillText('Detector Response', graphX + 10, graphY - 10);
            
            // Y-axis labels
            ctx.font = '12px Arial';
            ctx.fillStyle = '#aaa';
            ctx.fillText('Signal', graphX - 40, graphY + 20);
            ctx.fillText('Time →', graphX + graphWidth - 50, graphY + graphHeight + 20);
            
            if (lightIntensity > 0.3) {
                // Classical regime - continuous signal
                drawContinuousSignal();
            } else {
                // Quantum regime - discrete clicks
                drawDiscreteClicks();
            }
        }
        
        function drawContinuousSignal() {
            ctx.strokeStyle = '#00ff88';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let x = 0; x < graphWidth; x += 2) {
                const t = time * 0.1 + x * 0.02;
                const noise = (Math.random() - 0.5) * 0.1;
                const signal = lightIntensity * 0.8 + Math.sin(t) * 0.1 + noise;
                const y = graphY + graphHeight - (signal * graphHeight * 0.8);
                
                if (x === 0) ctx.moveTo(graphX + x, y);
                else ctx.lineTo(graphX + x, y);
            }
            ctx.stroke();
            
            // Add "Continuous" label
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#00ff88';
            ctx.fillText('Continuous Signal', graphX + 10, graphY + 30);
        }
        
        function drawDiscreteClicks() {
            // Draw discrete click spikes
            ctx.strokeStyle = '#ff6666';
            ctx.lineWidth = 2;
            
            const timeWindow = 100;
            const currentTime = time;
            
            for (const click of detectorClicks) {
                if (currentTime - click.time < timeWindow) {
                    const x = graphX + ((currentTime - click.time) / timeWindow) * graphWidth;
                    const spikeHeight = graphHeight * 0.8;
                    
                    ctx.beginPath();
                    ctx.moveTo(x, graphY + graphHeight);
                    ctx.lineTo(x, graphY + graphHeight - spikeHeight);
                    ctx.stroke();
                    
                    // Click dot
                    ctx.fillStyle = '#ffff00';
                    ctx.beginPath();
                    ctx.arc(x, graphY + graphHeight - spikeHeight, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            // Add "Discrete" label
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#ff6666';
            ctx.fillText('Discrete Clicks', graphX + 10, graphY + 30);
        }
        
        function drawPhysicsInfo() {
            // Physics explanation box
            const infoX = 50;
            const infoY = 350;
            const infoWidth = 350;
            const infoHeight = 200;
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(infoX, infoY, infoWidth, infoHeight);
            
            ctx.strokeStyle = '#ffaa00';
            ctx.lineWidth = 2;
            ctx.strokeRect(infoX, infoY, infoWidth, infoHeight);
            
            ctx.font = 'bold 16px Arial';
            ctx.fillStyle = '#ffaa00';
            ctx.fillText('Photoelectric Effect', infoX + 10, infoY -10);
            
            ctx.font = '14px Arial';
            ctx.fillStyle = '#fff';
            
            const lines = [
                `Photon Energy: ${photonEnergy.toFixed(1)} eV`,
                `Work Function: ${workFunction.toFixed(1)} eV`,
                '',
                'High Intensity:',
                '• Continuous light beam',
                '• Classical behavior',
                '• Smooth detector signal',
                '',
                'Low Intensity:',
                '• Individual photons',
                '• Quantum behavior',
                '• Discrete detector clicks'
            ];
            
            lines.forEach((line, index) => {
                ctx.fillText(line, infoX + 15, infoY +15+ index * 16);
            });
        }
        
        function updateUI() {
            document.getElementById('intensityValue').textContent = Math.round(lightIntensity * 100) + '%';
            
            if (lightIntensity > 0.3) {
                document.getElementById('photonRate').textContent = 'Continuous';
                document.getElementById('regimeValue').textContent = 'Classical';
            } else if (lightIntensity > 0.05) {
                document.getElementById('photonRate').textContent = 'High Rate';
                document.getElementById('regimeValue').textContent = 'Transition';
            } else {
                document.getElementById('photonRate').textContent = 'Single Photons';
                document.getElementById('regimeValue').textContent = 'Quantum';
            }
            
            document.getElementById('clickCount').textContent = totalClicks;
        }
        
        function animate() {
            if (!isAnimating) return;
            
            drawBackground();
            drawLaser();
            drawScreen();
            drawPhotons();
            drawDetector();
            drawDetectorGraph();
            drawPhysicsInfo();
            updateUI();
            
            time += 1;
            animationId = requestAnimationFrame(animate);
        }
        
        // Control functions
        function toggleAnimation() {
            isAnimating = !isAnimating;
            if (isAnimating) animate();
        }
        
        function resetAnimation() {
            time = 0;
            lightIntensity = 1.0;
            photonQueue = [];
            detectorClicks = [];
            totalClicks = 0;
            lastClickTime = 0;
        }
        
        function dimLight() {
            lightIntensity = Math.max(0.01, lightIntensity * 0.3);
        }
        
        function brightenLight() {
            lightIntensity = Math.min(1.0, lightIntensity * 2);
        }
        
        function toggleDetector() {
            detectorOn = !detectorOn;
        }
        
        // Start animation
        animate();
    </script>
</body>
</html>